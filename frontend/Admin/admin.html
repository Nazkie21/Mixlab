<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MixLab Admin Panel</title>
    <link rel="stylesheet" href="admin.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* Small inline helper for simple placeholder icons (kept for compatibility) */
        .icon::before {
            content: "\25B6"; /* triangle bullet */
            margin-right: 8px;
            font-weight: 700;
            font-size: 0.85em;
            color: rgba(255,255,255,0.9);
        }
    </style>
</head>
<body>

    <div class="admin-container">
        <aside class="sidebar">
            <div class="logo">
                <span class="icon"></span>
                <span class="logo-text">MixLab Admin</span>
            </div>
            <button class="collapse-btn" aria-label="Toggle menu">☰</button>
            <nav class="nav-menu">
                <ul>
                    <li class="active"><a href="#"><span class="icon"></span>Dashboard</a></li>
                    <li><a href="#"><span class="icon"></span>Users & Gamers</a></li>
                    <li><a href="#"><span class="icon"></span>Courses & Quests</a></li>
                    <li><a href="#"><span class="icon"></span>Instruments DB</a></li>
                    <li><a href="#"><span class="icon"></span>Analytics & Stats</a></li>
                    <li><a href="#"><span class="icon"></span>Settings</a></li>
                    <li><a href="#" class="logout-link"><span class="icon"></span>Logout</a></li>
                </ul>
            </nav>
        </aside>

        <main class="main-content">
            <header class="topbar">
                <div class="left-top">
                    <div class="page-title">Dashboard Overview</div>
                    <div class="search-wrap">
                        <input id="searchInput" class="search-input" type="search" placeholder="Search users, courses, quests..." aria-label="Search">
                    </div>
                </div>

                <div class="user-profile">
                    <button class="action-btn" title="Add user" onclick="window.location.href='../register.html'">+ Add User</button>
                    <button id="exportCsvBtn" class="action-btn" title="Export table">Export CSV</button>
                    <span id="connectionStatus" class="connection-indicator" title="Connection status"></span>
                    <span class="notification-icon icon" title="Notifications" tabindex="0"></span>
                    <span class="user-name">Admin Musician</span>
                    <div class="user-avatar">AM</div>
                </div>
            </header>

            <section class="dashboard-widgets">
                <div class="widget total-users">
                    <h3>Total Users</h3>
                    <p>12,450</p>
                    <span>+50 today</span>
                </div>
                <div class="widget active-courses">
                    <h3>Active Courses</h3>
                    <p>45</p>
                    <span>New Guitar Course!</span>
                </div>
                <div class="widget highscore">
                    <h3>Top High Score</h3>
                    <p>Level 99 - Maestro</p>
                    <span>Check Leaderboard</span>
                </div>
                <div class="widget new-registrations">
                    <h3>New Signups</h3>
                    <p>321</p>
                    <span>This Week</span>
                </div>
            </section>

            <section class="latest-activity">
                <h2>Latest Student Activity</h2>
                <div class="table-controls">
                    <div class="left-controls">
                        <label>Filter: <select id="statusFilter"><option value="all">All</option><option value="completed">Completed</option><option value="xp">Has XP</option></select></label>
                        <label>Per page: <select id="pageSizeSelect"><option>5</option><option selected>10</option><option>20</option></select></label>
                    </div>
                    <div class="right-controls">
                        <button id="runTestBtn" class="action-btn">Run self-test</button>
                    </div>
                </div>

                <table id="activityTable">
                    <thead>
                        <tr>
                            <th>User</th>
                            <th>Quest/Lesson</th>
                            <th>Score/XP</th>
                            <th>Time</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Guitarkid01</td>
                            <td>Chord Theory I Quiz</td>
                            <td>+500 XP</td>
                            <td>5 mins ago</td>
                            <td class="action-buttons">
                                <button class="btn-small btn-edit" data-row="1">Edit</button>
                                <button class="btn-small btn-remove" data-row="1">Delete</button>
                            </td>
                        </tr>
                        <tr>
                            <td>DrummerDude</td>
                            <td>Percussion Rhythms Module</td>
                            <td>Completed</td>
                            <td>1 hour ago</td>
                            <td class="action-buttons">
                                <button class="btn-small btn-edit" data-row="2">Edit</button>
                                <button class="btn-small btn-remove" data-row="2">Delete</button>
                            </td>
                        </tr>
                        <tr>
                            <td>PianoProdigy</td>
                            <td>Melody Composition Quest</td>
                            <td>+1200 XP</td>
                            <td>3 hours ago</td>
                            <td class="action-buttons">
                                <button class="btn-small btn-edit" data-row="3">Edit</button>
                                <button class="btn-small btn-remove" data-row="3">Delete</button>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <div class="pagination" id="pagination"></div>
            </section>

        </main>
    </div>

    <!-- SVG sprite for simple icons -->
    <svg style="display:none;" aria-hidden="true">
      <symbol id="icon-dashboard" viewBox="0 0 24 24"><path fill="currentColor" d="M3 13h8V3H3v10zm0 8h8v-6H3v6zM13 21h8V11h-8v10zM13 3v6h8V3h-8z"/></symbol>
      <symbol id="icon-users" viewBox="0 0 24 24"><path fill="currentColor" d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3zM8 11c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5C15 14.17 10.33 13 8 13zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5C23 14.17 18.33 13 16 13z"/></symbol>
      <symbol id="icon-logout" viewBox="0 0 24 24"><path fill="currentColor" d="M16 13v-2H7V8l-5 4 5 4v-3zM20 3h-8v2h8v14h-8v2h8c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/></symbol>
    </svg>

    <!-- Edit modal -->
    <div id="editModal" class="modal" aria-hidden="true">
      <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
        <header class="modal-header">
          <h3 id="modalTitle">Edit Activity</h3>
          <button class="modal-close" aria-label="Close">×</button>
        </header>
        <div class="modal-body">
          <form id="editForm">
            <div class="form-row"><label>User <span id="modalUser"/></label></div>
            <div class="form-row"><label>Lesson <input id="modalLesson" type="text"/></label></div>
            <div class="form-row"><label>Score/XP <input id="modalScore" type="text"/></label></div>
            <div class="form-actions"><button type="submit" class="action-btn">Save</button> <button type="button" class="action-btn" id="modalCancel">Cancel</button></div>
          </form>
        </div>
      </div>
    </div>

    <script src="admin.js"></script>

</body>
</html>